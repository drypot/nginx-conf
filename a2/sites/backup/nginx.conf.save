#user html;
worker_processes  1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;

events {
	worker_connections  768;
}

http {
	include       /etc/nginx/mime.types;
	default_type  application/octet-stream;

	#log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
	#                  '$status $body_bytes_sent "$http_referer" '
	#                  '"$http_user_agent" "$http_x_forwarded_for"';

	#access_log  logs/access.log  main;

	sendfile        on;
	#tcp_nopush     on;

	#keepalive_timeout  0;
	keepalive_timeout  65;

	gzip on;
	gzip_types text/plain text/css application/x-javascript application/xml application/json application/xml+rss;

	include /data/nginx/sites-enabled/*;

	server {
		listen 80 default_server;
		server_name _;
		
		location ^~ /.well-known {
		  allow all;
		  alias /var/lib/letsencrypt/.well-known/;
		  default_type "text/plain";
		  try_files $uri =404;
		}

	  location / {
			return 301 https://$host$request_uri;
		}
	}

#	server {
#		listen 80 default_server;
#		server_name _;
#		return 444;
#	}

}

